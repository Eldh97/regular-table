<!--
   
   Copyright (c) 2020, the Regular Table Authors.
   
   This file is part of the Regular Table library, distributed under the terms of
   the Apache License 2.0.  The full license can be found in the LICENSE file.

-->

<!--

    An example of a [`regular-table`](https://github.com/jpmorganchase/regular-table)
    data model which generates data on-the-fly to simulate a 2,000,000,000 row
    `<table>`.
    
-->

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <script src="../dist/umd/regular-table.js"></script>
    <link rel='stylesheet' href="../dist/css/material.css">

    <style>
        td {
            color: #1078d1;
        }
        tbody th:last-of-type,
        thead tr:nth-child(2) th:nth-child(2),
        thead tr:first-child th:first-child {
            border-right: 1px solid #ddd;
        }
    </style>
</head>

<body>

    <regular-table></regular-table>

    <script>
        const NUM_ROWS = 2000000000;
        const NUM_COLUMNS = 1000;

        const formatter = new Intl.NumberFormat("en-us");

        const clamp = (x, y) => formatter.format(Math.floor(x / y) * y);
        const range = (x0, x1, f) => Array.from(Array(x1 - x0).keys()).map((x) => f(x + x0));

        function dataListener(x0, y0, x1, y1) {
            return {
                num_rows: NUM_ROWS,
                num_columns: NUM_COLUMNS,
                row_headers: range(y0, y1, (i) => [`Group ${clamp(i, 10)}`, `Row ${formatter.format(i)}`]),
                column_headers: range(x0, x1, (i) => [`Group ${clamp(i, 10)}`, `Column ${formatter.format(i)}`]),
                data: range(x0, x1, (x) => range(y0, y1, (y) => formatter.format(x + y))),
            };
        }

        const table = document.getElementsByTagName("regular-table")[0];
        table.setDataListener(dataListener);
        table.draw();
    </script>

</body>

</html>